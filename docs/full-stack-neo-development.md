# Full-Stack NEO Development Guide

## Tá»•ng Quan Project

HÆ°á»›ng dáº«n nÃ y mÃ´ táº£ cÃ¡ch xÃ¢y dá»±ng má»™t á»©ng dá»¥ng NEO blockchain hoÃ n chá»‰nh tá»« smart contract Ä‘áº¿n frontend.

## ğŸ—ï¸ Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Full-Stack DApp                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚  Frontend (bolt.new-extended)                       â”‚
â”‚  â”œâ”€â”€ React/Remix                                    â”‚
â”‚  â”œâ”€â”€ TypeScript SDK (generated by CPM)             â”‚
â”‚  â”œâ”€â”€ WalletConnect (user interaction)              â”‚
â”‚  â””â”€â”€ Neon DappKit (blockchain interaction)         â”‚
â”‚                                                      â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
â”‚                                                      â”‚
â”‚  Smart Contracts (neo-devpack-ts)                   â”‚
â”‚  â”œâ”€â”€ TypeScript Contract Code                      â”‚
â”‚  â”œâ”€â”€ Compiled to .nef + .manifest.json             â”‚
â”‚  â””â”€â”€ Deployed to NEO Blockchain                    â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ Recommended Project Structure

```
my-neo-project/
â”‚
â”œâ”€â”€ contracts/                      # Smart Contract Development
â”‚   â”œâ”€â”€ neo-devpack-ts/            # Compiler (git submodule)
â”‚   â”‚   â”œâ”€â”€ samples/
â”‚   â”‚   â””â”€â”€ packages/
â”‚   â”‚
â”‚   â”œâ”€â”€ src/                       # Your contracts
â”‚   â”‚   â”œâ”€â”€ MyToken.ts
â”‚   â”‚   â”œâ”€â”€ MyNFT.ts
â”‚   â”‚   â””â”€â”€ MyDApp.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ build/                     # Compiled contracts
â”‚   â”‚   â”œâ”€â”€ MyToken.nef
â”‚   â”‚   â”œâ”€â”€ MyToken.manifest.json
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ test/                      # Contract tests
â”‚   â”‚   â””â”€â”€ express.batch
â”‚   â”‚
â”‚   â””â”€â”€ deploy/                    # Deployment scripts
â”‚       â”œâ”€â”€ deploy-testnet.sh
â”‚       â””â”€â”€ deploy-mainnet.sh
â”‚
â”œâ”€â”€ frontend/                      # Frontend Application
â”‚   â”œâ”€â”€ bolt.new-extended/         # Your existing project
â”‚   â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”‚   â”œâ”€â”€ contracts/        # Generated SDKs
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ mytoken/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ mynft/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ mydapp/
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ routes/
â”‚   â”‚   â”‚       â”œâ”€â”€ index.tsx     # Home page
â”‚   â”‚   â”‚       â”œâ”€â”€ token.tsx     # Token page
â”‚   â”‚   â”‚       â”œâ”€â”€ nft.tsx       # NFT page
â”‚   â”‚   â”‚       â””â”€â”€ dapp.tsx      # DApp page
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ cpm.yaml
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â””â”€â”€ docs/                      # Project documentation
â”‚       â””â”€â”€ ...
â”‚
â”œâ”€â”€ scripts/                       # Automation scripts
â”‚   â”œâ”€â”€ setup.sh                  # Setup entire project
â”‚   â”œâ”€â”€ deploy-and-sync.sh        # Deploy contract â†’ Generate SDK
â”‚   â””â”€â”€ dev.sh                    # Start dev environment
â”‚
â”œâ”€â”€ .env.example                   # Environment variables template
â”œâ”€â”€ .gitignore
â”œâ”€â”€ README.md
â””â”€â”€ package.json                   # Root package.json (monorepo)
```

## ğŸš€ Complete Development Workflow

### Phase 1: Setup Project

```bash
# 1. Create project directory
mkdir my-neo-project
cd my-neo-project

# 2. Clone neo-devpack-ts
git clone https://github.com/N3developertoolkit/neo-devpack-ts.git contracts/neo-devpack-ts
cd contracts/neo-devpack-ts
npm install
npm run setup
npm run build

# 3. Setup frontend (bolt.new-extended already exists)
cd ../..
# Your bolt.new-extended is already at /home/uydev/code/bolt.new-extended

# 4. Create project structure
mkdir -p contracts/src
mkdir -p contracts/build
mkdir -p contracts/test
mkdir -p contracts/deploy
mkdir -p scripts
```

### Phase 2: Develop Smart Contract

```bash
# Create contract file
cd contracts/src
```

**Example: `MyToken.ts`**

```typescript
import { SmartContract, Hash160, Deploy } from '@neo-blockchain/typescript';

@Deploy
export class MyToken extends SmartContract {
  // Token Info
  public static symbol(): string {
    return 'MYT';
  }

  public static decimals(): number {
    return 8;
  }

  // Total Supply
  public static totalSupply(): number {
    const supply = SmartContract.storage.get('totalSupply');
    return supply ? (supply as number) : 0;
  }

  // Balance Operations
  public static balanceOf(account: Hash160): number {
    const balance = SmartContract.storage.get(account);
    return balance ? (balance as number) : 0;
  }

  // Transfer
  public static transfer(
    from: Hash160,
    to: Hash160,
    amount: number,
    data: any
  ): boolean {
    if (!SmartContract.runtime.checkWitness(from)) {
      return false;
    }

    const fromBalance = this.balanceOf(from);
    if (fromBalance < amount) {
      return false;
    }

    // Update balances
    if (fromBalance === amount) {
      SmartContract.storage.delete(from);
    } else {
      SmartContract.storage.put(from, fromBalance - amount);
    }

    const toBalance = this.balanceOf(to);
    SmartContract.storage.put(to, toBalance + amount);

    SmartContract.events.Transfer(from, to, amount);
    return true;
  }

  // Mint (Owner only)
  public static mint(to: Hash160, amount: number): boolean {
    // Add owner check here
    const balance = this.balanceOf(to);
    SmartContract.storage.put(to, balance + amount);

    const supply = this.totalSupply();
    SmartContract.storage.put('totalSupply', supply + amount);

    SmartContract.events.Transfer(null, to, amount);
    return true;
  }
}
```

### Phase 3: Compile Contract

```bash
cd contracts/neo-devpack-ts

# Copy your contract to samples
cp ../src/MyToken.ts samples/mytoken/mytoken.ts

# Compile
npx foy mytoken

# Check output
ls -la samples/mytoken/build/
# Should see: mytoken.nef, mytoken.manifest.json
```

### Phase 4: Test Contract (Local)

```bash
# Start neo-express
neoxp run

# In another terminal
neoxp wallet create test-wallet

# Transfer GAS for deployment
neoxp transfer gas genesis test-wallet 1000

# Deploy contract
neoxp contract deploy samples/mytoken/build/mytoken.nef test-wallet

# Test contract methods
neoxp contract invoke <contract-hash> symbol
neoxp contract invoke <contract-hash> totalSupply
```

### Phase 5: Deploy to TestNet

```bash
# Create deployment script
cat > contracts/deploy/deploy-testnet.sh << 'EOF'
#!/bin/bash

CONTRACT_NAME="mytoken"
WALLET_PATH="./wallet.json"
RPC_URL="https://testnet1.neo.coz.io:443"

echo "Deploying ${CONTRACT_NAME} to TestNet..."

neoxp contract deploy \
  ../neo-devpack-ts/samples/${CONTRACT_NAME}/build/${CONTRACT_NAME}.nef \
  --wallet ${WALLET_PATH} \
  --rpc ${RPC_URL}

echo "Contract deployed! Save the contract hash."
EOF

chmod +x contracts/deploy/deploy-testnet.sh

# Run deployment
cd contracts/deploy
./deploy-testnet.sh
```

**Output:**
```
Contract deployed: 0x1234567890abcdef1234567890abcdef12345678
```

### Phase 6: Generate Frontend SDK

```bash
cd /home/uydev/code/bolt.new-extended

# Update cpm.yaml
cat > cpm.yaml << 'EOF'
defaults:
  contract-source-network: testnet
  contract-destination: ""
  contract-generate-sdk: true
  off-chain:
    languages:
      - ts
    destinations:
      ts: app/contracts

contracts:
  - label: My Token
    script-hash: 0x1234567890abcdef1234567890abcdef12345678
    source-network: testnet
    generate-sdk: true
    download: false

tools:
  neo-express:
    canGenerateSDK: false
    canDownloadContract: false
    config-path: ""

networks:
  - label: testnet
    hosts:
      - https://testnet1.neo.coz.io:443
EOF

# Download manifest and generate SDK
cpm download manifest \
  -c 0x1234567890abcdef1234567890abcdef12345678 \
  -N https://testnet1.neo.coz.io:443

cpm generate ts \
  -m contract.manifest.json \
  -c 0x1234567890abcdef1234567890abcdef12345678 \
  -o app/contracts

rm contract.manifest.json

echo "SDK generated at: app/contracts/mytoken/"
```

### Phase 7: Build Frontend UI

**Create route: `app/routes/token.tsx`**

```typescript
import { useState, useEffect } from 'react';
import { NeonInvoker } from '@cityofzion/neon-dappkit';
import WcSdk from '@cityofzion/wallet-connect-sdk-core';
import { MyToken } from '~/contracts/mytoken';

let wcSdk: any;
let neonInvoker: any;

export default function TokenPage() {
  const [balance, setBalance] = useState<number>(0);
  const [totalSupply, setTotalSupply] = useState<number>(0);
  const [account, setAccount] = useState('');
  const [recipient, setRecipient] = useState('');
  const [amount, setAmount] = useState('');

  useEffect(() => {
    async function init() {
      neonInvoker = await NeonInvoker.init({
        rpcAddress: NeonInvoker.TESTNET,
      });

      wcSdk = await WcSdk.init({
        projectId: 'a9ff54e3d56a52230ed8767db4d4a810',
        relayUrl: 'wss://relay.walletconnect.com',
        metadata: {
          name: 'My NEO Token DApp',
          description: 'Token management application',
          url: window.location.origin,
          icons: ['https://myapp.com/icon.png'],
        },
      });

      wcSdk.emitter.on('session', (session: any) => {
        if (session) {
          const addr = wcSdk.getAccountAddress();
          setAccount(addr);
          loadBalance(addr);
        }
      });

      await wcSdk.manageSession();
      loadTotalSupply();
    }
    init();
  }, []);

  async function loadTotalSupply() {
    const token = new MyToken({
      scriptHash: MyToken.SCRIPT_HASH,
      invoker: neonInvoker,
    });

    const supply = await token.totalSupply();
    setTotalSupply(supply);
  }

  async function loadBalance(address: string) {
    const token = new MyToken({
      scriptHash: MyToken.SCRIPT_HASH,
      invoker: wcSdk?.isConnected() ? wcSdk : neonInvoker,
    });

    const bal = await token.balanceOf({ account: address });
    setBalance(bal);
  }

  async function handleTransfer() {
    if (!wcSdk?.isConnected()) {
      alert('Please connect wallet first');
      return;
    }

    const token = new MyToken({
      scriptHash: MyToken.SCRIPT_HASH,
      invoker: wcSdk,
    });

    try {
      const txId = await token.transfer({
        from: account,
        to: recipient,
        amount: parseInt(amount) * 100000000, // Convert to smallest unit
        data: null,
      });

      alert(`Transfer successful! TX: ${txId}`);
      loadBalance(account);
    } catch (error) {
      alert(`Transfer failed: ${error}`);
    }
  }

  return (
    <div style={{ padding: '40px', maxWidth: '600px', margin: '0 auto' }}>
      <h1>ğŸª™ My Token DApp</h1>

      {/* Token Info */}
      <div style={{ background: '#f0f0f0', padding: '20px', borderRadius: '8px', marginBottom: '20px' }}>
        <h2>Token Info</h2>
        <p><strong>Total Supply:</strong> {totalSupply / 100000000} MYT</p>
        {account && <p><strong>Your Balance:</strong> {balance / 100000000} MYT</p>}
      </div>

      {/* Wallet Connection */}
      {!wcSdk?.isConnected() ? (
        <button onClick={() => wcSdk.connect('neo3:testnet', ['invokeFunction', 'testInvoke'])}>
          Connect Wallet
        </button>
      ) : (
        <div style={{ marginBottom: '20px' }}>
          <p>Connected: {account.slice(0, 10)}...</p>
          <button onClick={() => wcSdk.disconnect()}>Disconnect</button>
        </div>
      )}

      {/* Transfer Form */}
      {wcSdk?.isConnected() && (
        <div>
          <h2>Transfer Tokens</h2>
          <input
            type="text"
            placeholder="Recipient Address"
            value={recipient}
            onChange={(e) => setRecipient(e.target.value)}
            style={{ width: '100%', padding: '10px', marginBottom: '10px' }}
          />
          <input
            type="number"
            placeholder="Amount"
            value={amount}
            onChange={(e) => setAmount(e.target.value)}
            style={{ width: '100%', padding: '10px', marginBottom: '10px' }}
          />
          <button onClick={handleTransfer}>Transfer</button>
        </div>
      )}
    </div>
  );
}
```

### Phase 8: Run and Test

```bash
# Terminal 1: Run frontend
cd /home/uydev/code/bolt.new-extended
pnpm dev

# Visit: http://localhost:3000/token
```

## ğŸ”„ Automated Workflow Script

Táº¡o script tá»± Ä‘á»™ng hÃ³a toÃ n bá»™ quy trÃ¬nh:

**`scripts/deploy-and-sync.sh`**

```bash
#!/bin/bash

set -e

CONTRACT_NAME=$1
NETWORK=${2:-testnet}

if [ -z "$CONTRACT_NAME" ]; then
  echo "Usage: ./deploy-and-sync.sh <contract-name> [network]"
  exit 1
fi

echo "ğŸ“¦ Step 1: Compiling contract..."
cd contracts/neo-devpack-ts
npx foy $CONTRACT_NAME

echo "ğŸš€ Step 2: Deploying to $NETWORK..."
cd ../deploy
./deploy-$NETWORK.sh

echo "ğŸ“¥ Step 3: Generating SDK..."
# You'll need to manually get contract hash from deployment output
read -p "Enter deployed contract hash: " CONTRACT_HASH

cd ../../frontend/bolt.new-extended

cpm download manifest -c $CONTRACT_HASH -N https://${NETWORK}1.neo.coz.io:443
cpm generate ts -m contract.manifest.json -c $CONTRACT_HASH -o app/contracts
rm contract.manifest.json

echo "âœ… Complete! SDK generated at app/contracts/${CONTRACT_NAME}/"
echo "ğŸ‰ You can now use the contract in your frontend!"
```

## ğŸ“Š Development Timeline

### Week 1: Setup & Learning
- Setup neo-devpack-ts
- Study sample contracts
- Understand NEO blockchain basics

### Week 2: Smart Contract Development
- Design contract architecture
- Write contract code
- Test on neo-express

### Week 3: Deployment & Testing
- Deploy to TestNet
- Test all contract functions
- Fix bugs and optimize

### Week 4: Frontend Integration
- Generate TypeScript SDK
- Build UI components
- Integrate WalletConnect
- End-to-end testing

## ğŸ¯ Production Checklist

Before deploying to MainNet:

- [ ] Contract code reviewed thoroughly
- [ ] All tests passing on TestNet
- [ ] Security audit completed
- [ ] Gas optimization done
- [ ] Frontend tested with real wallets
- [ ] Documentation complete
- [ ] Backup wallet and keys securely
- [ ] Monitor contract after deployment

## ğŸ“š Additional Resources

- [Complete Example Project](https://github.com/neo-project/examples)
- [NEO Smart Contract Best Practices](https://docs.neo.org/docs/en-us/develop/write/basics.html)
- [Debugging Smart Contracts](https://github.com/neo-project/neo-devpack-dotnet/blob/master/docs/debugging.md)

---

**Happy Full-Stack Development!** ğŸš€

